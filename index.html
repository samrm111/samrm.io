<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Samuel Rondeau-Millaire | Portfolio</title>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="css/style.css" />

    <link href='http://fonts.googleapis.com/css?family=Lato:100,400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600' rel='stylesheet' type='text/css'>
    <script src="http://code.jquery.com/jquery-1.11.2.min.js"></script>
    <script src="js/bootstrap.min.js"></script>

    <link rel="icon" type="image/x-icon" href="favicon.ico" />
</head>

<body>
    <div class="hover-circle"></div>
    <div id="chooseLang">
        <div class="container">
            <div class="circular-img"></div>
            <div class="vertical-center">
                <h1>WELCOME</h1>
                <h1>BIENVENUE</h1>
                <button class="btn btn-default" id="en">ENGLISH</button>
                <button class="btn btn-default" id="fr">FRANÃ‡AIS</button>
            </div>
        </div>
    </div>
    <div id="about">
    </div>
    <script>
        var locale;

        $("#chooseLang button").click(function(event) {
            locale = $(this).attr('id');
            generatePage(locale, event);
        });

        function generatePage(locale, event) {
            history.pushState("locale", locale);

            var circle = $(".hover-circle");
            var circleSize = 0;

            //To preserve a perfect circle, select the biggest.
            if ($(window).width() > $(window).height()) {
                circleSize = $(window).width() * 2;
            } else {
                circleSize = $(window).height() * 2;
            }

            // Put hover-circle at the location of the click
            circle.css('left', event.pageX);
            circle.css('top', event.pageY);

            // Make the cricle visible
            circle.show();
            circle.animate({
                width: "+=" + circleSize,
                height: "+=" + circleSize,
                top: "-=" + circleSize / 2,
                left: "-=" + circleSize / 2
            }, 500, function() {
                $("#chooseLang").css("display", "none");
                $("#about").css("display", "block");

                //Load content
                showContentView();
                circle.fadeOut(function() {
                    //Put default values
                    circle.css("width", 0);
                    circle.css("height", 0);
                    circle.css("top", 0);
                    circle.css("left", 0);
                });
            });
        };

        function showChooseLangView() {
            $("#chooseLang").css("display", "block");
            $("#about").css("display", "none");
        }

        function showContentView() {
            var url = "EN/index.html";
            
            if (locale == "fr") {
                url = "FR/index.html";
            }

            $("#about").load(url);
        }

        window.addEventListener('popstate', function(event) {
            
            var state = event.state;
            showChooseLangView();  
        });
    </script>
</body>

</html>
